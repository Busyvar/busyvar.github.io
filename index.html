<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link rel="stylesheet" href="style.css">
	</head>
<style>

</style>
<body>
<div class="container">
        <header>
            <h1>Application de gestion de taches</h1>
        </header>
        <template id="task_object">
			<input class="touchtaskname" type="checkbox" name="summary"></input>
            <div id="progress_bar">
            <input class="level" type="radio" checked name="t1"><input class="level" type="radio" name="t1"><input class="level" type="radio" name="t1" ><input class="level" type="radio" name="t1" ><input class="level" type="radio" name="t1" >
            <div class="chart">
              <div class="bar">
                <div class="growing-bar"></div>
              </div>
            </div>
          </div>
           <div class="desc">
			 <div class="desc_header">
				 <input onblur="update_title()" id="task_title_input"  placeholder="Taskname" name="t1" spellcheck="false" class="edittaskname"></input><button  id="del_button">ðŸ—‘</button>
			 </div>
             <textarea  rows="10" spellcheck="false" placeholder="Enter description"></textarea>
           </div>
        </template>
        <section id="tasklist">
          <h2>liste de taches</h2>
        </section>
  <button id="add_task_control" onclick="addTask()">+</button>
    </div> 
</body>
<script>
var taskNumber=0;
function addTask()
{
  taskNumber++;
  let currentNumber = taskNumber;
  let taskContainer = document.createElement("article");
  let taskLabel = "task-"+taskNumber;
  taskContainer.id= taskLabel;

  let clone = document.importNode( document.querySelector("#task_object").content, true);
  clone.querySelectorAll(".level")
		.forEach(e => e.name = taskLabel);
  clone.querySelector("#del_button")
		.onclick = () => removeTask(taskLabel);
  let tti = clone.querySelector("#task_title_input")
  let ttn = clone.querySelector(".touchtaskname");
  tti.name = taskLabel;
  tti.addEventListener('blur', () => { ttn.innerText=tti.value;});
  tti.addEventListener('keypress', (event) => {
    if(event.keyCode==13){event.srcElement.blur();};
  });
  
  
  document.querySelector("#tasklist")
		.appendChild(taskContainer)
			.appendChild(clone);
}
function removeTask(taskName) { document.querySelector("#"+taskName).remove();}


function update_title()
{
}
function unfocus()
{
	console.log(event);
	if(event.keyCode==13){document.getElementById("task_title_input").blur();}
}

document.body.onload = () => {
	addTask();
}
</script>
</html>
